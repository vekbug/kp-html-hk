/*! dialog.js 0.0.2 https://github.com/godxiaoji */ !function(){function a(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,function(){var b=window.event;b.target||(b.target=b.srcElement||document),b.preventDefault||(b.preventDefault=function(){this.returnValue=!1}),b.stopPropagation||(b.stopPropagation=function(){this.cancelBubble=!0}),c.call(a,b)})}function b(a,b){return 1===a.nodeType&&(" "+a.className+" ").indexOf(" "+b+" ")>=0}function c(a,c){if(c||(c=document),c.querySelectorAll)return c.querySelectorAll(a);var d,e=[],f,g=/^\.([\w-]+)$/,h=g.exec(a);if(h&&h[1]){for(d=c.getElementsByTagName("*"),f=0;f<d.length;f++)b(d[f],h[1])&&e.push(d[f]);return e}return[]}function d(a,b){var d=c(a,b);return d[0]||null}function e(){return Math.max(j.scrollHeight,k.scrollHeight)}function f(){return j.scrollTop||k.scrollTop}function g(){return Math.min(j.clientHeight,k.clientHeight)}function h(a){h.multi||h.clear();var b=new i(a);return h.list[b.id]=b}function i(b){var c,e=this;b="string"==typeof b||"number"==typeof b?{content:b}:b||{},c=h.getDialog(b),e.id=c.id,e.elem=c,e.wrap=d(".dialog-wrap",e.elem);var f=function(a){var c="function"==typeof b.cancel?b.cancel():!1;!c&&e.remove(),a.stopPropagation(),a.preventDefault()},g=d(".dialog-mask",e.elem),i=d(".dialog-ok",e.elem),j=d(".dialog-cancel",e.elem),k=d(".dialog-x",e.elem);return a(i,"click",function(a){var c="function"==typeof b.ok?b.ok():!1;!c&&e.remove(),a.stopPropagation(),a.preventDefault()}),window.addEventListener&&e.elem.addEventListener("touchmove",function(a){a.preventDefault()},!1),a(j,"click",f),a(k,"click",f),b.quickClose&&a(g,"click",f),b.autoShow!==!1&&e.show(),this}var j=document.documentElement,k=document.body;h.guid=0,h.multi=!1,h.list={},h.clear=function(){for(var a in h.list)h.list.hasOwnProperty(a)&&h.list[a].remove()},h.getDialog=function(a){var b=document.createElement("div");return b.id=a.id?a.id:"J_Dialog"+ ++h.guid,b.className="dialog",b.style.display="none",b.innerHTML=['<div class="dialog-mask"></div>','<div class="dialog-wrap '+(a.wrapClass||"")+'" style="opacity: 0">','<div class="dialog-inner">','<div class="dialog-hd"><a class="dialog-x" stat="video-close" href="javascript:void(0);" style="'+(a.hideClose?"display:none;":"")+'">×</a><span>'+(null!=a.title?a.title:"提示")+"</span></div>",'<div class="dialog-bd">'+(null!=a.content?a.content:"内容")+"</div>",'<div class="dialog-ft"><a class="dialog-btn dialog-cancel" href="javascript:void(0);" style="'+(null!=a.cancel?"":"display:none;")+'">'+(null!=a.cancelValue?a.cancelValue:"取消")+'</a><a class="dialog-btn dialog-ok" href="javascript:void(0);" style="'+(null!=a.ok?"":"display:none;")+'">'+(null!=a.okValue?a.okValue:"确定")+"</a></div>","</div>","</div>"].join(""),k.appendChild(b),b},i.prototype={hide:function(){this.elem.style.opacity=0,this.status="hide";var a,b=!1;for(a in h.list)"show"===h.list[a].status&&(b=!0);return this},adapt:function(){this.wrap.style.top=f()+Math.max((g()-this.wrap.offsetHeight)/2,0)+"px",this.elem.style.height=e()+"px"},show:function(){return this.status="show",this.elem.style.cssText=["position: absolute","top: 0","left: 0","width: 100%","height: 0"].join(";"),this.wrap.style.cssText=["position: absolute","top: 0","left: 0","width: 100%"].join(";"),this.adapt(),this},remove:function(){return this.hide(),this.elem.parentNode.removeChild(this.elem),delete h.list[this.id],this}};var l;a(window,"resize",function(a){clearTimeout(l),l=setTimeout(function(){for(var a in h.list)h.list.hasOwnProperty(a)&&h.list[a].adapt()},100)}),window.Dialog=h}();
