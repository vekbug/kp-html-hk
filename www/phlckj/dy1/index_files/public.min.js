function gotobookapp(e) { bookreport(e); var t = getQueryString("adsource") || "ysdq"; window.location.href = "http://d.dyreader.cn/apk/com.dotreader.dnovel-v2.1.1-201910261611-false_211_1_toutiao_sign.apk?adsource=" + t + "&" + uuid(24, 10) } function bookreport(e) { var t = "http://d.dyreader.cn/apk/com.dotreader.dnovel-bdfeedst.apk", n = GetRequest(), o = Object.assign(e, n), r = isAndroidCompare(), a = (new Date).getTime(); o.sarrs = 1, o.os = r ? 0 : 1, o.ctime = a, o.ua = navigator.userAgent, o.ref_url = getQueryString("ref_url"), o.sessionid = genID("_sid", null), o.cookieid = genID("_cid", 365), baoajax({ type: "GET", url: t, data: { data: JSON.stringify(o) }, async: !0, success: function (e) { }, error: function (e) { } }) } function genID(e, t) { var n = localStorage[e]; return n || (n = uuid(24, 10), localStorage.setItem(e, n)), n } function uuid(e, t) { var n, o, r = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), a = []; if (t = t || r.length, e) for (n = 0; n < e; n++)a[n] = r[0 | Math.random() * t]; else for (a[8] = a[13] = a[18] = a[23] = "-", a[14] = "4", n = 0; n < 36; n++)a[n] || (o = 0 | 16 * Math.random(), a[n] = r[19 == n ? 3 & o | 8 : o]); return a.join("") } function isAndroidCompare() { var e = navigator.userAgent.toLowerCase(); return e.indexOf("android") > -1 || e.indexOf("linux") > -1 ? (phoneis = "aphone", "android") : e.indexOf("iphone") > -1 ? (phoneis = "iphone", "iphone") : e.indexOf("ipad") > -1 ? (phoneis = "iphone", "ipad") : void 0 } function GetRequest() { var e = window.location.href.substr(window.location.href.indexOf("?")), t = new Object; if (-1 != e.indexOf("?")) for (var n = e.substr(1), o = n.split("&"), r = 0; r < o.length; r++)t[o[r].split("=")[0]] = unescape(o[r].split("=")[1]); return t } function baoajax() { var e = { type: (arguments[0].type || "GET").toUpperCase(), url: arguments[0].url || "", async: arguments[0].async || "true", data: arguments[0].data || null, dataType: arguments[0].dataType || "json", contentType: arguments[0].contentType || "application/x-www-form-urlencoded; charset=utf-8", beforeSend: arguments[0].beforeSend || function () { }, success: arguments[0].success || function () { }, error: arguments[0].error || function () { } }; e.beforeSend(); var t = createxmlHttpRequest(); t.responseType = e.dataType, "GET" == e.type || "get" == e.type ? (t.open(e.type, e.url + "?" + convertData(e.data), e.async), t.setRequestHeader("Content-Type", e.contentType), t.send(null)) : (t.open(e.type, e.url, e.async), t.setRequestHeader("Content-Type", e.contentType), t.send(e.data)), t.onreadystatechange = function () { 4 == t.readyState && (200 == t.status ? e.success(t.response) : e.error()) } } function createxmlHttpRequest() { if (window.XMLHttpRequest) return new XMLHttpRequest; if (window.ActiveXObject) for (var e = ["MSXML2.XMLHttp", "Microsoft.XMLHTTP"], t = 0, n = e.length; t < n; t++)try { return new ActiveXObject(version[t]) } catch (e) { } else console.error("浏览器不支持XHR对象！") } function convertData(e) { if ("object" == typeof e) { var t = []; for (var n in e) t.push(encodeURIComponent(n) + "=" + encodeURIComponent(e[n])); return t.join("&") } return e } function getQueryString(e) { var t = new RegExp("(^|&)" + e + "=([^&]*)(&|$)", "i"), n = decodeURIComponent(window.location.search.substr(window.location.search.indexOf("?"))), o = n.substr(1).match(t); return null != o ? unescape(o[2]) : "" } function documentsready(e) { if (document.addEventListener) document.addEventListener("DOMContentLoaded", function () { document.removeEventListener("DOMContentLoaded", arguments.callee, !1), e() }, !1); else if (document.attachEvent && (document.attachEvent("onreadystatechange", function () { "complete" == document.readyState && (document.detachEvent("onreadystatechange", arguments.callee), e()) }), document.documentElement.doScroll && void 0 === window.frameElement)) { try { document.documentElement.doScroll("left") } catch (e) { return setTimeout(arguments.callee, 20) } e() } }